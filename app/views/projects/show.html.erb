<%#  primary author: isabellat %>
<div class="onepage-body">
  <div id="onepage" class="main">
    <section style="background-color:#2c3e50">
      <div style="margin-top:20px">
        <div class="container">

          <div class="row">
            <div class="col-md-12">
              <div class="media" style="margin-top:20px">
                <a class="pull-left" href="#">
                  <img class="media-object img-rounded portfolio_user_image" src=<%= @project.get_owner.image_url %> alt="Sample Image">
                </a>
                <div class="media-body">
                  <h1 class="media-heading name"><%= current_user.fullname%></h1>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-12">
              <div class="title-box">
                <div id="title" class="usrinput medium-title"></div> 
                <div id="subtitle" class="usrinput medium-subtitle"></div>
              </div>
            </div>
          </div>
          <p id="add_block_btn" class="add_block_btn" onclick="create_section()"><i style='font-size:60px' class='fa fa-plus'></i><br> block</p>
        </div>
      </div>
    </section>
  </div>
</div>
<script>
  $(document).ready(function(){
    //------Add description div for medium editing-----//
    description = function(){
          num_sections = $('section').length
          return '<div class="container"><div class="row"><div class="col-md-6"><div id="description-'+(num_sections) + '" class="usrinput article medium-description"></div></div><div class="col-md-6"><i style="font-size:80px;padding:10px;color:#7f8c8d" class="fa fa-picture-o"></i><i style="font-size:80px;padding:10px; color:#7f8c8d" class="fa fa-code"></i><i style="font-size:80px;padding:10px; color:#7f8c8d" class="fa fa-align-left"></i></div></div></div>'
        }
    ////////////////////


      $(".main").onepage_scroll();
      create_section = function(){
        //determine how to color the section based on the index (number of sections already created)
        section_color = function(hex){
          hex = typeof hex !== 'undefined' ? hex : false;
          colors = ['gray', 'white']
          hex_colors=["#ecf0f1", "#fff"]
          if (hex){
            section_index = ($('section').length) % 2
            return hex_colors[section_index]
          }
          section_index = ($('section').length + 1) % 2
          return colors[section_index]
        }
        //add the chevron/down arrow and div to go down to next section
        $('#onepage section:last').append('<div class="bottom-hint-'+ section_color()+'"><i class="fa fa-chevron-down"></i></div><div class="bottom-padding-'+section_color()+'"></div>')

        //adds the section (method in jquery.onepage-scroll)
        $('.main').addSection()
        
        $('#onepage section:last').css("background-color",section_color(true))
        
        //---Append description to the section--//
        $('#onepage section:last').append(description())

        //----Append the 'add section' button to end of section--//
        $('#onepage section:last').append('<p id="add_block_btn" style="position:absolute;bottom:0;right:0; padding:30px 40px"class="add_block_btn" onclick="create_section()"><i style="font-size:60px" class="fa fa-plus"></i><br>block</p>')
        //////////////

        //creates new medium section when you click 'add_secton'
           new Medium({
              element: document.getElementById('description-' + (num_sections)),
                mode: 'rich',
              maxLength: 200,
              placeholder: 'Enter your description here'
            });
        }
         
        //initializes the title and subtitle as medium editable elements
        new Medium({
          element: document.getElementById('title'),
          mode: 'inline',
          maxLength: 30,
          placeholder: 'Type your title'
        });
        new Medium({
          element: document.getElementById('subtitle'),
          mode: 'inline',
          maxLength: 100,
          placeholder: 'Type your subtitle'
        });
      });
    </script>
